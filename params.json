{"name":"DigitalOcean API v2","tagline":"Full client-side implementation of the Digital Ocean v2 (beta) API","body":"#Digital Ocean API v2\r\n\r\nFull client-side javascript implementation of the [Digital Ocean v2 (beta) API](https://developers.digitalocean.com/v2/).\r\n\r\n##Implementation Basics\r\nA great deal of effort has been put in by the Digital Ocean devs to implement a consistent API, this implementation honors that by providing a very uniform interface, matching the entire API in the same consistent manner.\r\n\r\n\r\n###Main Interfaces\r\nAll of the (current) Digital Ocean API main interfaces are represented by an object of its own, all of these implement the `list` method which is used to obtain the overview of items in that interface.\r\n\r\n\r\n###Method signature\r\nAll methods follow the same simple convention; the last argument is always the callback function. The majority of methods does not require any other arguments. If no callback was provided an error is thrown:\r\n```javascript\r\n//  invoking the droplet.rename method without callback\r\nError: No callback function provided for rename method\r\n```\r\nIf any argument is required and a callback function is provided, the callback will be invoke with the error argument populated with an object indicating what is missing.\r\n```javascript\r\n//  invoking the droplet.rename method without name\r\n{ id: 'error_name', message: 'Missing argument(s): \"name\" for rename method' }\r\n```\r\n\r\n\r\n###Callback signature\r\nOur callback signature follows the same syntax commonly used for nodejs async functions: `function(error, result [, next])`.\r\n- `error`: If there are any errors, the error argument will be `true`-ish (not `null`, which is the default value), this is typically an object containing an id and a message.\r\n- `result`: If there are no errors, the result argument is populated with either an array (for `list` calls) or an object (for individual item calls)\r\n- `next`: If the API responded with an indication that there are more items in the list, the `next` argument will be a function which can be called (with one argument, a callback function), the `next` argument will be empty if there is no more to fetch for the call.\r\n\r\n\r\n###CamelCase\r\nOur eyes bleed when using an Object Oriented notation which has underscores in method names, hence we provide a lowerCamelCased API in our implementation, both in execution and response keys, but never in response values.\r\n\r\n\r\n###Limits\r\n####Rate-limit\r\nThe API is reasonably rate-limited to 1200 request per hour, if you exceed this, you will receive an error about having reached the limits (I personally believe congratulations would've in order here, as I never ran into these limits developing the library, which required a lot of requests in order to test).\r\n\r\n####Item-limit\r\nThe Digital Ocean devs have implemented a very sane default of 25 items per page, I have not implemented means to change this. Please open an issue if you need to influence the default (I will be curious for the 'why', so you might add it to the request upfront).\r\n\r\n\r\n##Token\r\nYou first need to [create a token](https://www.digitalocean.com/community/tutorials/how-to-use-the-digitalocean-api-v2) for your account, this token is then provided to the library.\r\nI am inclined to provide a proper example which asks for your API token and then stores it in localStorage, of course you could hardcode your token (and push it onto your production website for the world to play with your instances), but I *strongly urge you not to* (if you insist on doing this, please make sure to give me the link too).\r\n\r\n```javascript\r\n//  see of we can obtain the token from localStorage\r\nvar token = localStorage.getItem('DOAPIToken');\r\n\r\n//  if no token is found, we ask for it\r\nif (!token)\r\n{\r\n\ttoken = prompt('Your DigitalOcean API token please');\r\n\r\n\t//  ask permission to store the token in localStorage\r\n\tif (confirm('Do you want to save this token in localStorage?'))\r\n\t\tlocalStorage.setItem('DOAPIToken', token);\r\n}\r\n\r\n//  and finally pass on the token to the DOv2 instance.\r\nDOv2.token(token);\r\n```\r\n\r\n\r\n\r\n\r\n##Implementation\r\nThe library tries to stay out of the global scope as much as possible, the only 'polution' is the `DOv2` object, this contains all of the functionality.\r\n\r\n\r\n###Dependencies\r\nWhile a stand-alone XMLHTTPRequest implementation could've been written, I chose the Konflux library, it's mine, so why not plug it ;-)\r\n\r\n####Token\r\nA token is always required, there are no calls that go without.\r\n```javascript\r\nDOv2.token('<your token here>');\r\n```\r\n\r\n####Konflux\r\nYou can [get your copy of konflux here](http://build.konfirm.net) (I developed against the 'develop' build). Make sure to have the proper order in your source, konflux first, digitalocean.js after.\r\nIn case you're wondering if it sports a 'Document Ready' event:\r\n```javascript\r\nkx.ready(function(){\r\n\t//  please refer to the elaborate example on top of this page on how to safely have the convenience of being able\r\n\t//  to refresh without entering the token or (worse!) hardcoding it.\r\n\tDOv2.token(token);\r\n\r\n\t//  your DOv2 calls follow here...\r\n});\r\n```\r\n\r\n\r\n###Usage\r\n####Actions\r\nActions is an API call which lists all (limited to 25 per call) actions which have taken place on your account.\r\n```javascript\r\n//  Obtain the first bunch of actions\r\nDOv2.Actions.list(function(error, result, next){\r\n\tif (error)\r\n\t\tthrow new Error(error);\r\n\r\n\t//  result is an Array containing one Object per action\r\n\tconsole.log(result);\r\n\r\n\tif (next)\r\n\t\tconsole.log('And there is more...');\r\n});\r\n```\r\nOutput will be similar to:\r\n```javascript\r\n[\r\n\t{\r\n\t\tid: 12345678,\r\n\t\tstatus: \"completed\",\r\n\t\ttype: \"reboot\",\r\n\t\tstartedAt: \"2014-07-01T08:31:44Z\",\r\n\t\tcompletedAt: \"2014-07-01T08:32:06Z\",\r\n\t\tresourceId: 1859761,\r\n\t\tresourceType: \"droplet\",\r\n\t\tregion: \"nyc1\"\r\n\t}\r\n\t,\r\n\t...\r\n]\r\n```\r\n\r\n#####`id` method\r\nActions can also be retrieved individually by their id's\r\n```javascript\r\nDOv2.Actions.id(12345678, function(error, result){\r\n\tif (error)\r\n\t\tthrow new Error(error);\r\n\r\n\t//  result is a single Object\r\n\tconsole.log(result);\r\n\r\n\t//  no next, there can be only one...\r\n});\r\n```\r\nOutput will be similar to:\r\n```javascript\r\n{\r\n\tid: 12345678,\r\n\tstatus: \"completed\",\r\n\ttype: \"reboot\",\r\n\tstartedAt: \"2014-07-01T08:31:44Z\",\r\n\tcompletedAt: \"2014-07-01T08:32:06Z\",\r\n\tresourceId: 1234567,\r\n\tresourceType: \"droplet\",\r\n\tregion: \"nyc1\"\r\n}\r\n```\r\n\r\n####Droplets\r\nWith the Droplets API you can inspect and control your droplets.\r\n```javascript\r\nDOv2.Droplets.list(function(error, result, next){\r\n\tif (error)\r\n\t\tthrow new Error(error);\r\n\r\n\t//  result is an Array containing one Object per droplet\r\n\tconsole.log(result);\r\n\r\n\tif (next)\r\n\t\tconsole.log('And there is more...');\r\n\r\n});\r\n```\r\nOutput will be similar to:\r\n```javascript\r\n[\r\n\t{\r\n\t\tactionsIds: [\r\n\t\t\t1234, 2345, ..., 3456\r\n\t\t],\r\n\t\tactions: <function>,\r\n\t\tbackupId: [\r\n\t\t\t4567, 5678, ..., 6789\r\n\t\t],\r\n\t\tbackups: <function>,\r\n\t\tchangeKernel: <function>,\r\n\t\tdestroy: <function>,\r\n\t\tdisableBackups: <function>,\r\n\t\tenableIPv6: <function>,\r\n\t\tenablePrivateNetworking: <function>,\r\n\t\tid: 7890,\r\n\t\tkernel: {\r\n\t\t\tid: 8901,\r\n\t\t\tname: \"Ubuntu 14.04 x64 vmlinuz-3.13.0-24-generic (1221)\",\r\n\t\t\tversion: \"3.13.0-24-generic\"\r\n\t\t},\r\n\t\tkernels: <function>,\r\n\t\tlocked: false,\r\n\t\tname: \"My Awesome Droplet\",\r\n\t\tnetworks: {\r\n\t\t\tv4: [\r\n\t\t\t\t{\r\n\t\t\t\t\tgateway: 'x.x.x.x',\r\n\t\t\t\t\tipAddress: 'y.y.y.y',\r\n\t\t\t\t\tnetmask: 'z.z.z.z',\r\n\t\t\t\t\ttype: 'private'\r\n\t\t\t\t},\r\n\t\t\t\t...\r\n\t\t\t],\r\n\t\t\tv6: []  //  (only in Singapore atm)\r\n\t\t},\r\n\t\tpasswordReset: <function>,\r\n\t\tpowerCycle: <function>,\r\n\t\tpowerOff: <function>,\r\n\t\tpowerOn: <function>,\r\n\t\treboot: <function>,\r\n\t\trebuild: <function>,\r\n\t\tregion: {\r\n\t\t\tavailable: true,\r\n\t\t\tfeatures: [\r\n\t\t\t\t'virtio', 'private_networking', 'backups'\r\n\t\t\t],\r\n\t\t\tname: 'New York 1',\r\n\t\t\tsizes: [\r\n\t\t\t\t'512mb', '1gb', ..., '64gb'\r\n\t\t\t],\r\n\t\t\tslug: 'nyc1',\r\n\t\t},\r\n\t\trename: <function>,\r\n\t\tresize: <function>,\r\n\t\trestore: <function>,\r\n\t\tshutdown: <function>,\r\n\t\tsize: {\r\n\t\t\tdisk: 20,\r\n\t\t\tmemory: 512,\r\n\t\t\tpriceHourly: '0.00744',\r\n\t\t\tpriceMonthly: '5.0',\r\n\t\t\tregions: [\r\n\t\t\t\t'nyc1', 'sgp1', ..., 'nyc2'\r\n\t\t\t],\r\n\t\t\tslug: '512mb',\r\n\t\t\ttransfer: 1000,\r\n\t\t\tvcpus: 1\r\n\t\t},\r\n\t\tsnapshopIds: [\r\n\t\t\t9012, 9876, ..., 8765\r\n\t\t],\r\n\t\tsnapshots: <function>,\r\n\t\tstatus: 'off'\r\n\t}\r\n]\r\n```\r\nYou may have noticed how there are several member indicated as function on the items in the result array, these are the droplet instance actions, on which more in a bit.\r\n#####`id` method\r\nIn order to obtain a specific droplet by its id, you can use the `id` method\r\n```javascript\r\nDOv2.Droplets.id(7890, function(error, result){\r\n\tif (error)\r\n\t\tthrow new Error(error);\r\n\r\n\t//  result is a single Object\r\n\tconsole.log(result);\r\n\r\n\t//  no next, there can be only one...\r\n});\r\n```\r\nThe output will be similar to\r\n```javascript\r\n{\r\n\tactionsIds: [\r\n\t\t1234, 2345, ..., 3456\r\n\t],\r\n\tactions: <function>,\r\n\tbackupId: [\r\n\t\t4567, 5678, ..., 6789\r\n\t],\r\n\tbackups: <function>,\r\n\tchangeKernel: <function>,\r\n\tdestroy: <function>,\r\n\tdisableBackups: <function>,\r\n\tenableIPv6: <function>,\r\n\tenablePrivateNetworking: <function>,\r\n\tid: 7890,\r\n\tkernel: {\r\n\t\tid: 8901,\r\n\t\tname: \"Ubuntu 14.04 x64 vmlinuz-3.13.0-24-generic (1221)\",\r\n\t\tversion: \"3.13.0-24-generic\"\r\n\t},\r\n\tkernels: <function>,\r\n\tlocked: false,\r\n\tname: \"My Awesome Droplet\",\r\n\tnetworks: {\r\n\t\tv4: [\r\n\t\t\t{\r\n\t\t\t\tgateway: 'x.x.x.x',\r\n\t\t\t\tipAddress: 'y.y.y.y',\r\n\t\t\t\tnetmask: 'z.z.z.z',\r\n\t\t\t\ttype: 'private'\r\n\t\t\t},\r\n\t\t\t...\r\n\t\t],\r\n\t\tv6: []  //  (only in Singapore atm)\r\n\t},\r\n\tpasswordReset: <function>,\r\n\tpowerCycle: <function>,\r\n\tpowerOff: <function>,\r\n\tpowerOn: <function>,\r\n\treboot: <function>,\r\n\trebuild: <function>,\r\n\tregion: {\r\n\t\tavailable: true,\r\n\t\tfeatures: [\r\n\t\t\t'virtio', 'private_networking', 'backups'\r\n\t\t],\r\n\t\tname: 'New York 1',\r\n\t\tsizes: [\r\n\t\t\t'512mb', '1gb', ..., '64gb'\r\n\t\t],\r\n\t\tslug: 'nyc1',\r\n\t},\r\n\trename: <function>,\r\n\tresize: <function>,\r\n\trestore: <function>,\r\n\tshutdown: <function>,\r\n\tsize: {\r\n\t\tdisk: 20,\r\n\t\tmemory: 512,\r\n\t\tpriceHourly: '0.00744',\r\n\t\tpriceMonthly: '5.0',\r\n\t\tregions: [\r\n\t\t\t'nyc1', 'sgp1', ..., 'nyc2'\r\n\t\t],\r\n\t\tslug: '512mb',\r\n\t\ttransfer: 1000,\r\n\t\tvcpus: 1\r\n\t},\r\n\tsnapshopIds: [\r\n\t\t9012, 9876, ..., 8765\r\n\t],\r\n\tsnapshots: <function>,\r\n\tstatus: 'off'\r\n}\r\n```\r\n\r\n####Regions\r\nRegions is a simple API call, listing all the available regions\r\n```javascript\r\nDOv2.Regions.list(function(error, result, next){\r\n\tif (error)\r\n\t\tthrow new Error(error);\r\n\r\n\t//  result is an Array containing one Object per region\r\n\tconsole.log(result);\r\n\r\n\tif (next)\r\n\t\tconsole.log('And there is more...');\r\n});\r\n```\r\nOutput will be similar to:\r\n```javascript\r\n[\r\n\t{\r\n\t\tavailable: true,\r\n\t\tfeatures: [\r\n\t\t\t\"virtio\", \"backups\"\r\n\t\t],\r\n\t\tname: \"New York 1\",\r\n\t\tsizes: [\r\n\t\t\t\"512mb\", \"1gb\", ..., \"64gb\"\r\n\t\t],\r\n\t\tslug: \"nyc1\"\r\n\t}\r\n\t,\r\n\t...\r\n]\r\n```\r\n\r\n\r\n####Sizes\r\nSizes is an API call which lists all (limited to 25 per call) available sizes (for droplets).\r\n```javascript\r\nDOv2.Sizes.list(function(error, result, next){\r\n\tif (error)\r\n\t\tthrow new Error(error);\r\n\r\n\t//  result is an Array containing one Object per size\r\n\tconsole.log(size);\r\n\r\n\tif (next)\r\n\t\tconsole.log('And there is more...');\r\n});\r\n```\r\nOutput will be similar to:\r\n```javascript\r\n[\r\n\t{\r\n\t\tdisk: 20,\r\n\t\tmemory: 512,\r\n\t\tpriceHourly: \"0.00744\",\r\n\t\tpriceMonthly: \"5.0\",\r\n\t\tregions: [\r\n\t\t\t\"nyc1\", \"sgp1\", ..., \"nyc2\"\r\n\t\t],\r\n\t\tslug: \"512mb\",\r\n\t\ttransfer: 1000,\r\n\t\tvcpus: 1\r\n\t}\r\n\t,\r\n\t...\r\n]\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}